<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Rides</title>
	<link rel="stylesheet" type="text/css" href="defaultstyle.css">
	<link rel="stylesheet" type="text/css" href="mystyle.css">
	<link href="https://fonts.googleapis.com/css?family=Titan+One" rel="stylesheet">
</head>
<body>
<p>
	<h1>
		Ride-My-Way
	</h1>
	<div class="navbar">
		<ul>
			<li><a href="history.html">Profile</a></li>
			<li><a href="userrides.html" class="active">Rides</a></li>
			<li><a href="mkridereq.html">ReqRide</a></li>
			<li style="float:right"><a href="#" id="logout">Logout</a></li>
		</ul>
	</div>
	<br>
		<table id="table_hd" class="ridemytable">
            <center style="font-size: 30px; padding: 20px;"><h2>Available Rides</h2></center>
        </table>
		<table id="me_table" class="ridemytable"></table>
<br>
<br>
<div id="footer">
	<p>&copy 2018 Ride-My-Way All Rights Reserved | Antony Kavooh</p>
</div>
<script>
	window.addEventListener('load', getRides);
	// document.getElementById("getRides").addEventListener("click",getRides);
	function getRides(e){
	     e.preventDefault();
	    fetch("http://127.0.0.1:5000/api/v2/rides", {
         headers: {'Content-Type': 'application/json'}
    })
			.then((res) => res.json())
			.then((data) => {
			    console.log(data)
			let table_header = `<th>ID</th>
							<th>Driver</th>
							<th>Route</th>
							<th>Time</th>`;
				let output = ''
			    data.forEach(function(rides){
			        output += `
						<tr>
						<td>${rides.ride_id}</td>
						<td>${rides.driver}</td>
						<td>${rides.route}</td>
						<td>${rides.time}</td>
						<td><a href="mkridereq.html">Call-My-Ride</a></td>
						</tr>`;
			        document.getElementById("table_hd").innerHTML = table_header;
			        document.getElementById("me_table").innerHTML = output;

                })
			})
	}
		document.getElementById('logout').addEventListener('click', logoutUser)
		function logoutUser(e){
	    e.preventDefault();
	    localStorage.clear()
			window.location.replace('Login.html')
	}
</script>
</body>
</html>